local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")

-- Follow script functionality
local isFollowing = false
local followConnection = nil

local function startFollow(playerName)
    local player = game.Players:FindFirstChild(playerName)
    if player and player.Character then
        local startPos = player.Character.HumanoidRootPart.CFrame * CFrame.new(0, -10, -1)
        local endPos = player.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, -1)
        
        local tweenInfo = TweenInfo.new(
            1,
            Enum.EasingStyle.Linear
        )
        
        local tween = TweenService:Create(
            game.Players.LocalPlayer.Character.HumanoidRootPart,
            tweenInfo,
            {CFrame = endPos}
        )
        
        tween:Play()
        tween.Completed:Wait()
        
        followConnection = game:GetService("RunService").Heartbeat:Connect(function()
            if player and player.Character then
                local targetCFrame = player.Character.HumanoidRootPart.CFrame * CFrame.new(0, 0, -1)
                game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(
                    targetCFrame.Position,
                    targetCFrame.Position + player.Character.HumanoidRootPart.CFrame.LookVector
                )
            end
        end)
    end
end

local function stopFollow()
    if followConnection then
        followConnection:Disconnect()
        followConnection = nil
        isFollowing = false
    end
end

game.Players.LocalPlayer.Chatted:Connect(function(message)
    local split = message:split(" ")
    
    if split[1] == ";cat" then
        if split[2] == "follow" and split[3] then
            if isFollowing then
                stopFollow()
            end
            isFollowing = true
            startFollow(split[3])
        elseif split[2] == "stop" then
            stopFollow()
        end
    end
end)
