-- Services and References
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RemoteEvent = ReplicatedStorage.RemoteEvent
local Workspace = game:GetService("Workspace")

-- Cache frequently used references
local cauldron = workspace.PlayerCauldrons.PlayerCauldron7.CauldronSet.Cauldron
local rightGripAttachment = workspace.GPTbot_1.RightHand.RightGripAttachment
local cauldronContents = cauldron.Contents

-- Create a table of common remote calls
local RemoteCalls = {
    PickUpItem = function(fairy)
        RemoteEvent:FireServer("PickUpItem", fairy)
    end,
    
    WeldToHand = function(gripAttachment)
        RemoteEvent:FireServer("FireAllClients", "WeldItemToHand", 
            gripAttachment,
            rightGripAttachment
        )
    end,
    
    UnweldFromHand = function(main)
        RemoteEvent:FireServer("FireAllClients", "UnweldItemFromHand", main)
    end,
    
    AddToCauldron = function(fairy)
        RemoteEvent:FireServer("AddIngredientToCauldron", cauldron, fairy)
    end
}

-- Execute potion making sequence
local function makeFairyPotion(fairy, gripAttachment, main)
    RemoteCalls.PickUpItem(fairy)
    RemoteCalls.WeldToHand(gripAttachment)
    RemoteCalls.UnweldFromHand(main)
    RemoteCalls.AddToCauldron(fairy)
    
    -- Bottle and effects
    RemoteEvent:FireServer("AttemptBottlePotion", cauldron)
    RemoteEvent:FireServer("FireAllClients", "EmitParticles", 
        cauldronContents.ItemAdded,
        {Duration = 0.8}
    )
end
